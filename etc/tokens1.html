<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>Token Generator</title>
	<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
</head>
<body ng-app="tokenApp" ng-controller="tokenCtrl">
	<div>
		Please Enter Id and Password <br><br>
		<form ng-submit="DisplayDownline()">
			<label>
				<input type="radio" ng-model="server.type" value="0"> Production
			</label>
			<label>
				<input type="radio" ng-model="server.type" value="1"> Dev
			</label><br><br>
			<input type="text" ng-model="tusername" size="20" placeholder="Distributor No.">
        	<input type="password" ng-model="tpassword" size="20" placeholder="Password">
			<input type="submit" value="Generate">
		</form>
	</div>
	<div>{{token}}</div>
	<div>{{autoship}}</div>
	<div>{{order}}</div>
<script>
	var app = angular.module('tokenApp', []);
	app.controller('tokenCtrl', function($scope, $http, $window) {
		$scope.server = {
			type: 0
		};

		var bas = [{id:"200062382",pwd:"8387",ord:"82-421050272"},
{id:"189373882",pwd:"a01094767829",ord:"82-421050287"},
{id:"204331782",pwd:"1235",ord:"82-421050353"},
{id:"188638782",pwd:"3684",ord:"82-421050439"},
{id:"199329282",pwd:"6634",ord:"82-421050312"},
{id:"182364882",pwd:"7803",ord:"82-421050339"},
{id:"183761782",pwd:"ks4050",ord:"82-421050358"},
{id:"192817782",pwd:"3709",ord:"82-421050365"},
{id:"198109982",pwd:"7236",ord:"82-421050400"},
{id:"188709382",pwd:"1234",ord:"82-421050368"},
{id:"203348782",pwd:"7108",ord:"82-421050383"},
{id:"202467982",pwd:"2217",ord:"82-421050467"},
{id:"203557982",pwd:"k46287733",ord:"82-421050483"},
{id:"204809882",pwd:"1004",ord:"82-421050494"},
{id:"193219182",pwd:"6460",ord:"82-421050426"},
{id:"176056482",pwd:"2815",ord:"82-421050405"},
{id:"196226982",pwd:"8296",ord:"82-421050503"},
{id:"197269882",pwd:"7777",ord:"82-421050490"},
{id:"198469582",pwd:"3726",ord:"82-421050532"},
{id:"205623482",pwd:"9637",ord:"82-421050588"},
{id:"203626882",pwd:"5055",ord:"82-421050622"},
{id:"207580882",pwd:"6895",ord:"82-421050545"},
{id:"205386782",pwd:"01053908829",ord:"82-421050554"},
{id:"198602382",pwd:"7071",ord:"82-421050556"},
{id:"207898882",pwd:"5311",ord:"82-421050641"},
{id:"176353782",pwd:"1004",ord:"82-421050647"},
{id:"194149482",pwd:"1588",ord:"82-421050649"},
{id:"206783882",pwd:"4607",ord:"82-421050538"},
{id:"207819182",pwd:"9610",ord:"82-421050547"},
{id:"206393282",pwd:"7518",ord:"82-421050568"},
{id:"192464882",pwd:"2291",ord:"82-421050574"},
{id:"208057282",pwd:"1814",ord:"82-421050577"},
{id:"197269882",pwd:"7777",ord:"82-421050569"},
{id:"206930382",pwd:"3217",ord:"82-421050591"},
{id:"189685182",pwd:"0983",ord:"82-421050606"},
{id:"205852682",pwd:"12345",ord:"82-421050700"},
{id:"209251982",pwd:"5268",ord:"82-421050725"},
{id:"195518482",pwd:"1629",ord:"82-421050733"},
{id:"205925182",pwd:"yek119119",ord:"82-421050738"},
{id:"176363582",pwd:"1234",ord:"82-421050744"},
{id:"207586682",pwd:"3022",ord:"82-421050585"},
{id:"206317782",pwd:"3149",ord:"82-421050627"},
{id:"207885682",pwd:"1566",ord:"82-421050638"},
{id:"205026782",pwd:"0098",ord:"82-421050657"},
{id:"205995682",pwd:"1234",ord:"82-421050681"},
{id:"198679982",pwd:"2128",ord:"82-421050763"},
{id:"207901882",pwd:"1004",ord:"82-421050771"},
{id:"208349182",pwd:"1930",ord:"82-421050805"},
{id:"209380482",pwd:"01054255628",ord:"82-421050818"},
{id:"169756082",pwd:"2631",ord:"82-421050833"},
{id:"198758782",pwd:"560125",ord:"82-421050628"},
{id:"207642682",pwd:"1379",ord:"82-421050629"},
{id:"205987482",pwd:"2130",ord:"82-421050635"},
{id:"206841982",pwd:"8861",ord:"82-421050653"},
{id:"208955182",pwd:"5346",ord:"82-421050686"},
{id:"208678882",pwd:"mj20",ord:"82-421050688"},
{id:"188314082",pwd:"0018",ord:"82-421050693"},
{id:"207599782",pwd:"7945",ord:"82-421050699"},
{id:"175083182",pwd:"1872",ord:"82-421050705"},
{id:"207788582",pwd:"1369",ord:"82-421050708"},
{id:"206932582",pwd:"7777",ord:"82-421050662"},
{id:"202336082",pwd:"2252",ord:"82-421050669"},
{id:"205096282",pwd:"9859",ord:"82-421050677"},
{id:"193482982",pwd:"5013",ord:"82-421050679"},
{id:"179682782",pwd:"6508",ord:"82-421050689"},
{id:"189394282",pwd:"1061",ord:"82-421050870"},
{id:"206815282",pwd:"1317",ord:"82-421050875"},
{id:"208970582",pwd:"2068",ord:"82-421050876"},
{id:"209149182",pwd:"gogo2131",ord:"82-421050881"},
{id:"209232582",pwd:"0942",ord:"82-421050723"},
{id:"178438682",pwd:"3140",ord:"82-421050773"},
{id:"187578182",pwd:"7676",ord:"82-421050774"},
{id:"208587782",pwd:"9477",ord:"82-421050777"},
{id:"204653782",pwd:"3013",ord:"82-421050695"},
{id:"208506582",pwd:"7402",ord:"82-421050702"},
{id:"208760782",pwd:"9009",ord:"82-421050706"},
{id:"208719582",pwd:"6392",ord:"82-421050710"},
{id:"205194782",pwd:"3068",ord:"82-421050714"},
{id:"208381282",pwd:"2962",ord:"82-421050730"},
{id:"209913782",pwd:"0532",ord:"82-421050890"},
{id:"207278382",pwd:"4410",ord:"82-421050903"},
{id:"208350082",pwd:"7577",ord:"82-421050795"},
{id:"191496982",pwd:"7289",ord:"82-421050797"},
{id:"202714482",pwd:"1627",ord:"82-421050802"},
{id:"183173382",pwd:"K402207o",ord:"82-421050757"},
{id:"184378082",pwd:"1778",ord:"82-421050930"},
{id:"209769982",pwd:"qlalf7",ord:"82-421050941"},
{id:"205709782",pwd:"8282",ord:"82-421050942"},
{id:"209513382",pwd:"5002",ord:"82-421050836"},
{id:"203590582",pwd:"kim4429",ord:"82-421050850"},
{id:"185970282",pwd:"yyy66678",ord:"82-421050868"},
{id:"208813082",pwd:"3702",ord:"82-421050874"},
{id:"205848082",pwd:"7853",ord:"82-421050776"},
{id:"209374882",pwd:"8517",ord:"82-421050786"},
{id:"209474382",pwd:"5459",ord:"82-421050798"},
{id:"209473682",pwd:"1120",ord:"82-421050799"},
{id:"202372482",pwd:"1111k",ord:"82-421050808"},
{id:"201336982",pwd:"9565",ord:"82-421050824"},
{id:"209320982",pwd:"2124",ord:"82-421050951"},
{id:"177715582",pwd:"2460",ord:"82-421050956"},
{id:"202648382",pwd:"3376",ord:"82-421050967"},
{id:"209830882",pwd:"4473",ord:"82-421050878"},
{id:"196462182",pwd:"7950",ord:"82-421050904"},
{id:"208465582",pwd:"1234",ord:"82-421050907"},
{id:"208618082",pwd:"8925",ord:"82-421050910"},
{id:"208618082",pwd:"8925",ord:"82-421050911"},
{id:"187798682",pwd:"1234",ord:"82-421050916"},
{id:"203556482",pwd:"3668",ord:"82-421050832"},
{id:"206100482",pwd:"01052148772",ord:"82-421050853"},
{id:"203321982",pwd:"6347",ord:"82-421050860"},
{id:"209553182",pwd:"5606",ord:"82-421050866"},
{id:"203181882",pwd:"1464",ord:"82-421050869"},
{id:"176980982",pwd:"7023",ord:"82-421050883"},
{id:"202350182",pwd:"5707",ord:"82-421050995"},
{id:"209802382",pwd:"e01032881523",ord:"82-421050999"},
{id:"209580682",pwd:"2124",ord:"82-421051008"},
{id:"209456282",pwd:"0475",ord:"82-421051011"},
{id:"202977482",pwd:"6677",ord:"82-421051017"},
{id:"208120282",pwd:"a7287",ord:"82-421050929"},
{id:"209071482",pwd:"1077",ord:"82-421050935"},
{id:"208233982",pwd:"0000",ord:"82-421050963"},
{id:"189973782",pwd:"1111",ord:"82-421050966"},
{id:"209381782",pwd:"0000",ord:"82-421050974"},
{id:"200463882",pwd:"7321",ord:"82-421050978"},
{id:"187739282",pwd:"0924",ord:"82-421050897"},
{id:"201842282",pwd:"5259",ord:"82-421050906"},
{id:"207278382",pwd:"4410",ord:"82-421050940"},
{id:"208826182",pwd:"01067004550",ord:"82-421051023"},
{id:"199850582",pwd:"6428",ord:"82-421051041"},
{id:"209271582",pwd:"asd6315",ord:"82-421051069"},
{id:"210303382",pwd:"09876",ord:"82-421050980"},
{id:"207632082",pwd:"eoqkr2ekd0",ord:"82-421050985"},
{id:"210288282",pwd:"6913",ord:"82-421050989"},
{id:"199599382",pwd:"2778",ord:"82-421051005"},
{id:"210495982",pwd:"3376",ord:"82-421051013"},
{id:"209183282",pwd:"1234",ord:"82-421051014"},
{id:"200065182",pwd:"~wldud0701",ord:"82-421050971"},
{id:"210180882",pwd:"0036",ord:"82-421050975"},
{id:"204544082",pwd:"9357",ord:"82-421050981"},
{id:"186278682",pwd:"8682",ord:"82-421050990"},
{id:"209234282",pwd:"7028",ord:"82-421051077"},
{id:"209581482",pwd:"4861",ord:"82-421051086"},
{id:"210480182",pwd:"lilu*9*7",ord:"82-421051093"},
{id:"208686482",pwd:"3083",ord:"82-421051018"},
{id:"203648182",pwd:"01087393833",ord:"82-421051039"},
{id:"207998782",pwd:"4732",ord:"82-421051043"},
{id:"210010182",pwd:"8353",ord:"82-421051049"},
{id:"210443682",pwd:"8186",ord:"82-421051067"},
{id:"207787682",pwd:"4704",ord:"82-421051021"},
{id:"209874082",pwd:"es8733002",ord:"82-421051101"},
{id:"208070782",pwd:"9435",ord:"82-421051102"},
{id:"189181282",pwd:"0206",ord:"82-421051103"},
{id:"200966182",pwd:"85215241",ord:"82-421051107"},
{id:"208810982",pwd:"0146",ord:"82-421051109"},
{id:"189181082",pwd:"5488",ord:"82-421051129"},
{id:"208704382",pwd:"1004",ord:"82-421051070"},
{id:"207925482",pwd:"1381",ord:"82-421051073"},
{id:"191827382",pwd:"1014",ord:"82-421051075"},
{id:"210129882",pwd:"sydb2710",ord:"82-421051076"},
{id:"210350382",pwd:"9555",ord:"82-421051080"},
{id:"209761482",pwd:"4348",ord:"82-421051083"},
{id:"209516082",pwd:"6644",ord:"82-421051053"},
{id:"207548082",pwd:"0523",ord:"82-421051054"},
{id:"210645982",pwd:"6726",ord:"82-421051060"},
{id:"209541482",pwd:"7276",ord:"82-421051066"},
{id:"209305382",pwd:"0212",ord:"82-421051087"},
{id:"203027682",pwd:"3661",ord:"82-421051110"},
{id:"211332482",pwd:"1771",ord:"82-421051130"},
{id:"211458282",pwd:"1651",ord:"82-421051142"},
{id:"190872682",pwd:"6502",ord:"82-421051148"},
{id:"211437082",pwd:"1021",ord:"82-421051155"},
{id:"208320682",pwd:"7993",ord:"82-421051161"},
{id:"209669982",pwd:"8411",ord:"82-421051104"},
{id:"172533082",pwd:"472w0398",ord:"82-421051111"},
{id:"209895982",pwd:"1164",ord:"82-421051113"},
{id:"210172182",pwd:"2857",ord:"82-421051120"},
{id:"211331982",pwd:"9232",ord:"82-421051133"},
{id:"211368282",pwd:"1234",ord:"82-421051139"},
{id:"209436982",pwd:"1688",ord:"82-421051199"},
{id:"211116082",pwd:"7429",ord:"82-421051200"},
{id:"209903682",pwd:"9358",ord:"82-421051202"},
{id:"200525282",pwd:"1046",ord:"82-421051209"},
{id:"211292982",pwd:"9179",ord:"82-421051136"},
{id:"211211782",pwd:"2196",ord:"82-421051137"},
{id:"208398482",pwd:"01032395412",ord:"82-421051156"},
{id:"819378803",pwd:"1234",ord:"82-421051193"},
{id:"210226282",pwd:"jiangyan",ord:"82-421051146"},
{id:"210184182",pwd:"2538",ord:"82-421051152"},
{id:"185937982",pwd:"54809558",ord:"82-421051160"},
{id:"208351182",pwd:"0248",ord:"82-421051172"},
{id:"202353982",pwd:"2498",ord:"82-421051186"},
{id:"209398782",pwd:"9473",ord:"82-421051211"},
{id:"210747482",pwd:"8223",ord:"82-421051223"},
{id:"184353982",pwd:"5827",ord:"82-421051233"},
{id:"210040282",pwd:"3044",ord:"82-421051224"},
{id:"210757982",pwd:"k1000",ord:"82-421051229"},
{id:"211315282",pwd:"9712",ord:"82-421053244"},
{id:"209613782",pwd:"5214",ord:"82-421051197"},
{id:"211182682",pwd:"5078",ord:"82-421051198"},
{id:"212178682",pwd:"6805",ord:"82-421051206"},
{id:"210108682",pwd:"3406",ord:"82-421051214"},
{id:"172476182",pwd:"7285",ord:"82-421051217"},
{id:"201540582",pwd:"4286",ord:"82-421051226"},
{id:"203193982",pwd:"8848",ord:"82-421052739"}];
		var responseText = "";
	$scope.DisplayDownline = function() {
    	
      	
		 
     // alert(bas.length);
       for (var i =0; i<bas.length; i++){
      	$scope.getInfo(bas[i]['id'],bas[i]['pwd'],bas[i]['ord']) ;
    
     }
     console.log('end');
    }
    $scope.getInfo = function(id,pwd,ord){
      
      var credential = btoa(id + ":" + pwd);

      var namespace = "https://hydra.unicity.net/v5/customers";
      var url = "https://hydra.unicity.net/v5/loginTokens";
    
      if($scope.server.type == '1') {
        namespace = "https://hydraqa.unicity.net/v5-test/customers";
        url = "https://hydraqa.unicity.net/v5-test/loginTokens";
      }
      console.log('1');
      var authdata = {
            'type' : 'base64',
            'value' : credential,
            'namespace' : namespace
          };
          
          authdata = JSON.stringify(authdata);
         
        $http({
            'method': 'POST',
            'url': url,
            'data' : authdata
          }).success(function(response) {
            console.log(response);
             
            $scope.getOrd(response.token,id,ord);
            console.log('end');
            
        }).error(function(msg, code) {
          console.log('f');
            $scope.result += msg;
            //return msg;
        });

      }

       
      $scope.getOrd = function(token,id,ord) {
        var url = "https://hydra.unicity.net/v5/customers/me/orders?dateCreated=[2019-05;2019-06]&expand=order";
        
        if ($scope.server.type == '1') {
          url = "https://hydraqa.unicity.net/v5-test/customers/me/";
        }
        console.log(url);       
        if (token != '') {
          $http({
            'method': 'GET',
            'url': url,
            'headers': {
              'Authorization': 'Bearer ' + token
            }
          }).success(function(response) {
          	href = "";
          	console.log(response['items'].length);
             for(j=0;j<response['items'].length;j++){
             	if (response['items'][j]['id']['unicity'] == ord){
             		href= response['items'][j]['href'];
             		console.log(href);
             		break;
             	}
             }
             console.log('bbbb');
             responseText += "update smart_order set o_autoship_order_href='"+ href+"' where o_mid="+id + " and o_autoship_ordernum='"+ord+"' and o_autoship_order_href='' ; ";
             $scope.token = responseText;


          }).error(function(msg, code) {
            $scope.result = msg;
          });
        }
    }  
    	
	})
</script>

</body>

</html>